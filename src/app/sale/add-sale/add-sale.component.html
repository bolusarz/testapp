<div class="row">
  <div class="col-md-6">
    <form [formGroup]="searchform" (ngSubmit)="add(searchform.value)">
      <mat-form-field class="mr-3">
        <mat-label> Search Products.... </mat-label>
        <input type="text" matInput title="product" [formControl]="searchform.controls['search']" list="products">
        <datalist id="products">
          <option *ngFor="let data of products " value="{{ data.product_name }}">  </option>
        </datalist>
        <mat-icon matSuffix> search </mat-icon>
      </mat-form-field>
      <button mat-raised-button class="btn-primary"> Add </button>
    </form>
  </div>

  <div class="col-md-6">
    <mat-form-field>
      <mat-label>Add Discount</mat-label>
      <input type="number" matInput title="discount" [(ngModel)]="discount" (change)="_discount()">
    </mat-form-field>
  </div>

</div>

<div class="container-fluid mt-4" *ngIf="display">
  <mat-card>
    <mat-card-title>
      Sales Form
    </mat-card-title>
    <mat-card-content>
      <form [formGroup]="salesform">
        <div class="row">

          <div class="col-md-12 p-3">
            <mat-form-field class="full-width">
              <mat-label> Product </mat-label>
              <input matInput type="text" formControlName="product" title="product" #f>
            </mat-form-field>
          </div>

          <div class="col-md-6 p-3">
            <mat-form-field class="full-width">
              <mat-label> Quantity </mat-label>
              <input matInput type="number" formControlName="quantity" title="quantity">
            </mat-form-field>
          </div>

          <div class="col-md-6 p-3">
            <mat-form-field class="full-width">
              <mat-label> Sales Measure </mat-label>
              <mat-select [formControl]="salesform.controls['sales_measure']">
                <mat-option *ngFor="let measure of salesmeasure" [value]="measure.price">
                  {{ measure.name }} - {{ measure.quantity }}
                </mat-option>
                <mat-option> <button mat-button (click)="add_salesmeasure(f.value)" class="full-width"> Add another </button> </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">

          </div>

          <div class="col-md-4">
            <button mat-raised-button class="full-width btn-primary"
                    [disabled]="salesform.invalid"
                    (click)="save_add(salesform.value)">Add another</button>
          </div>

          <div class="col-md-4">
            <button mat-raised-button class="full-width btn-danger" (click)="cancel()">Cancel</button>
          </div>
        </div>
      </form>

    </mat-card-content>
  </mat-card>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-3" *ngFor="let item of sales">
      <app-sales-display
        [sale]="item"
        (onselectedSale)="edit($event)">
      </app-sales-display>
    </div>
  </div>

</div>

<div class="row mt-3 border-top border-bottom p-2" *ngIf="calculate()">
  <div class="col-7 display-4">
    <h2 class="text-gray">Total</h2>
  </div>
  <div class="col-5 float-right display-3">
    <h2>{{calculate() | currency:'NGN'}}</h2>
  </div>
  <div class="container">
    <button mat-raised-button class="btn-success float-md-right" (click)="save()">Submit</button>
    <button mat-raised-button (click)="add_extra_info()" > Sale Details </button>
  </div>

</div>

<ngx-spinner
  bdColor = "rgba(51,51,51,0.05)"
  size = "large"
  color = "#721251"
  type = "timer"
> </ngx-spinner>
